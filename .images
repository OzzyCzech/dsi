#!/usr/bin/env bash

## View tools

alias exif-show="exiftool -s "
alias exif-show-dates="exiftool -time:all -s "

## Download tools

function download-images() {
  exiftool -r -m -d "Pictures/%Y/%m/%Y-%m-%d %H.%M.%S%%-c.%%le" \
    "-filename<FileInodeChangeDate" "-filename<ModifyDate" "-filename<CreateDate" "-filename<CreationDate" "-filename<DateTimeOriginal" \
    -if '$filename !~ /^\./' \
    -ext jpg -ext png -ext gif -ext tif -ext tiff "$@"
}

function download-raws() {
  exiftool -r -m -d "RAW/%Y/%m/%Y-%m-%d %H.%M.%S%%-c.%%le" \
    -if '$filename !~ /^\./' \
    "-filename<FileInodeChangeDate" "-filename<ModifyDate" "-filename<CreateDate" "-filename<CreationDate" "-filename<DateTimeOriginal" \
    -ext cr2 -ext crw \          # Canon
    -ext nef -ext nrw \          # Nikon
    -ext arw -ext srf -ext sr2 \ # Sony
    -ext raw -ext rw2 \          # Panasonic
    -ext raf \                   # Fuji
    -ext orf \                   # Olympus
    "$@"
}

function download-videos() {
  exiftool -r -m -d "Videos/%Y/%Y-%m-%d %H.%M.%S%%-c.%%le" \
    "-filename<FileInodeChangeDate" "-filename<ModifyDate" "-filename<CreateDate" "-filename<CreationDate" "-filename<DateTimeOriginal" \
    -if '$filename !~ /^\./' \
    -ext mp4 -ext avi -ext mov -ext mkv -ext m4v "$@"
}

## Export tools

function exif-rename-only() {
  exiftool -r -m -d "%Y-%m-%d %H.%M.%S%%-c.%%le" \
    "-filename<FileInodeChangeDate" "-filename<ModifyDate" "-filename<CreateDate" "-filename<CreationDate" "-filename<DateTimeOriginal" \
    -if '$filename !~ /^\./' \
    -ext jpg -ext png -ext gif -ext tif -ext tiff \ # Images
    -ext mp4 -ext avi -ext mov -ext mkv -ext m4v \  # Videos
    -ext cr2 -ext crw \                             # Canon
    -ext nef -ext nrw \                             # Nikon
    -ext arw -ext srf -ext sr2 \                    # Sony
    -ext raw -ext rw2 \                             # Panasonic
    -ext raf \                                      # Fuji
    -ext orf \                                      # Olympus
    "$@"
}

alias exif-to-json="exiftool -json -g -gps:all "
alias exif-thumbnail="exiftool -b -ThumbnailImage "
alias exif-remove-all="exiftool -overwrite_original -all= "
alias exif-remove-gps="exiftool -overwrite_original -gps:all= "
alias exif-date-by-filename="exiftool '-alldates<filename'"

function exif-add-keyword() {
  exiftool -overwrite_original -keywords+="${1}" ${2}
}

function exif-add-comment() {
  exiftool -overwrite_original -Comment="${1}" ${2}
}

## Backup/archive tools

function zip-folders() {
  find ${1} -type d -maxdepth 1 -mindepth 1 -exec tar czf {}.tar.gz {}  \;
}
